{"timestamp":"2025-06-15T08:01:12.003Z","level":"info","message":"Server started on port 8080"}
{"timestamp":"2025-06-15T08:01:12.450Z","level":"debug","message":"Loading configuration from /etc/myapp/config.yaml with overrides from environment variables: DATABASE_URL, REDIS_URL, SECRET_KEY, LOG_LEVEL, MAX_CONNECTIONS, IDLE_TIMEOUT, CORS_ORIGINS, RATE_LIMIT_PER_MINUTE, ENABLE_METRICS, METRICS_PORT, TLS_CERT_PATH, TLS_KEY_PATH, OAUTH_CLIENT_ID, OAUTH_CLIENT_SECRET, OAUTH_REDIRECT_URI, SESSION_TTL_SECONDS"}
{"timestamp":"2025-06-15T08:01:14.891Z","level":"info","message":"Database connection pool established","host":"db-primary-us-east-1.internal.prod.example.com","port":5432,"pool_size":25,"ssl":true}
{"timestamp":"2025-06-15T08:02:33.107Z","level":"warn","message":"Slow query detected: SELECT u.id, u.email, u.name, u.created_at, u.updated_at, p.avatar_url, p.bio, p.location, p.website, s.plan, s.seats_used, s.seats_total, s.billing_cycle, s.next_invoice_date FROM users u JOIN profiles p ON p.user_id = u.id JOIN subscriptions s ON s.org_id = u.org_id WHERE u.org_id = $1 AND u.deleted_at IS NULL ORDER BY u.created_at DESC LIMIT 100 OFFSET 0 -- duration: 4823ms, rows: 100, scanned: 1482093"}
{"timestamp":"2025-06-15T08:02:45.220Z","level":"error","message":"Request failed","method":"POST","path":"/api/v2/webhooks/ingest","status":502,"error":"upstream connect error or disconnect/reset before headers. reset reason: connection failure, transport failure reason: delayed connect error: 111","request_id":"req_a1b2c3d4e5f6","user_agent":"GitHub-Hookshot/abc1234","remote_addr":"140.82.115.42","latency_ms":30002}
{"timestamp":"2025-06-15T08:03:01.558Z","level":"info","message":"Health check OK","checks":{"database":"ok","redis":"ok","elasticsearch":"ok","s3":"ok","kafka":"ok"},"response_time_ms":12}
{"timestamp":"2025-06-15T08:04:19.003Z","level":"error","message":"Panic in worker thread","panic":"called `Result::unwrap()` on an `Err` value: Os { code: 24, kind: Uncategorized, message: \"Too many open files\" }","backtrace":"   0: std::backtrace::Backtrace::create\n   1: myapp::worker::process_batch\n             at ./src/worker/mod.rs:142:18\n   2: myapp::worker::run_loop\n             at ./src/worker/mod.rs:87:9\n   3: std::thread::Builder::spawn_unchecked_\n             at /rustc/hash/library/std/src/thread/mod.rs:542:17"}
{"timestamp":"2025-06-15T08:04:19.005Z","level":"fatal","message":"Worker thread panicked, initiating graceful shutdown. Active connections: 847, pending requests: 23, in-flight batch jobs: 12. Notifying orchestrator at https://orchestrator.internal.prod.example.com/api/v1/nodes/us-east-1a-worker-07/status with state=draining. ETA for full drain: approximately 45 seconds based on current p99 latency of 380ms."}
2025-06-15 08:04:19.100 [INFO] Shutdown signal received. Draining connections... Waiting for 847 active connections and 12 in-flight batch jobs to complete. Timeout set to 60 seconds. Load balancer health endpoint returning 503. Deregistering from service discovery at consul.internal.prod.example.com.
2025-06-15 08:04:22.330 [WARN] Connection drain timeout approaching: 42 connections still active after 45s. Client IPs: 10.0.14.22, 10.0.14.23, 10.0.14.25, 10.0.14.31, 10.0.14.32, 10.0.14.40, 10.0.14.41, 10.0.14.55, 10.0.14.56, 10.0.14.57, 10.0.14.58, 10.0.14.59, 10.0.14.60, 10.0.14.61, 10.0.14.62, 10.0.14.63, 10.0.14.70, 10.0.14.71, 10.0.14.72, 10.0.14.73 (and 22 more)
